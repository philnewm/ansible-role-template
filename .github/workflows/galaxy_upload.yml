name: Ansible Galaxy Upload

on:
  release:
    types: [created]

env:
    ANSIBLE_GALAXY_TOKEN: ${{ secrets.ANSIBLE_GALAXY_TOKEN }}

jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - name: Import role to ansible-galaxy
        run: |
          ansible-galaxy role import ${{ github.repository_owner }} ${{ github.event.repository.name }} --token ${{ env.ANSIBLE_GALAXY_TOKEN }}